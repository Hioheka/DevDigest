<ng-container *ngIf="post() as post; else loadingTemplate">
  <mat-card class="detail-card">
    <mat-card-header>
      <mat-card-title>{{ post.title }}</mat-card-title>
      <mat-card-subtitle>
        {{ post.authorEmail }} &bull; {{ post.createdAt | date: 'dd MMM yyyy HH:mm' }}
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <p>{{ post.content }}</p>
      <mat-divider></mat-divider>
      <section class="comment-form" *ngIf="canComment(); else loginInfo">
        <h3>Yorum Yap</h3>
        <form [formGroup]="form" (ngSubmit)="submitComment()">
          <mat-form-field appearance="fill" class="full-width">
            <mat-label>Yorumunuz</mat-label>
            <textarea matInput rows="4" formControlName="content"></textarea>
          </mat-form-field>
          <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid">Gönder</button>
        </form>
      </section>
      <ng-template #loginInfo>
        <p>Yorum yapmak için giriş yapmalısınız.</p>
      </ng-template>
      <section class="comments">
        <h3>Yorumlar</h3>
        <article *ngFor="let comment of comments()" class="comment">
          <header>
            <strong>{{ comment.authorEmail }}</strong>
            <span>{{ comment.createdAt | date: 'dd MMM yyyy HH:mm' }}</span>
          </header>
          <p>{{ comment.content }}</p>
        </article>
        <p *ngIf="comments().length === 0">Henüz yorum yapılmamış.</p>
      </section>
    </mat-card-content>
  </mat-card>
</ng-container>
<ng-template #loadingTemplate>
  <p>Yazı yükleniyor...</p>
</ng-template>
